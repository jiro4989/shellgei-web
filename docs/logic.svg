<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="880px" preserveAspectRatio="none" style="width:1056px;height:880px;" version="1.1" viewBox="0 0 1056 880" width="1056px" zoomAndPan="magnify"><defs><filter height="300%" id="f6dvr9u1ddpw9" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f6dvr9u1ddpw9)" height="474.125" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="539" y="117.4297"/><rect fill="#FFFFFF" filter="url(#f6dvr9u1ddpw9)" height="16" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="539" y="768.3516"/><rect fill="#FFFFFF" filter="url(#f6dvr9u1ddpw9)" height="415.8594" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="792" y="263.0938"/><rect fill="#FFFFFF" filter="url(#f6dvr9u1ddpw9)" height="299.3281" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="869.5" y="321.3594"/><rect fill="#FFFFFF" filter="url(#f6dvr9u1ddpw9)" height="270.1953" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="971" y="379.625"/><rect fill="#FFFFFF" filter="url(#f6dvr9u1ddpw9)" height="133.6641" style="stroke: #000000; stroke-width: 2.0;" width="550.5" x="494.5" y="553.2891"/><rect fill="#FFFFFF" filter="url(#f6dvr9u1ddpw9)" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="443.5" x="150" y="730.0859"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="26" x2="26" y1="86.2969" y2="793.3516"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="115" x2="115" y1="86.2969" y2="793.3516"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="202" x2="202" y1="86.2969" y2="793.3516"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="282" x2="282" y1="86.2969" y2="793.3516"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="402" x2="402" y1="86.2969" y2="793.3516"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="543.5" x2="543.5" y1="86.2969" y2="793.3516"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="650.5" x2="650.5" y1="86.2969" y2="793.3516"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="797" x2="797" y1="86.2969" y2="793.3516"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="874" x2="874" y1="86.2969" y2="793.3516"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="976" x2="976" y1="86.2969" y2="793.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="8" y="82.9951">User</text><ellipse cx="26" cy="13" fill="#FEFECE" filter="url(#f6dvr9u1ddpw9)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M26,21 L26,48 M13,29 L39,29 M26,48 L13,63 M26,48 L39,63 " fill="none" filter="url(#f6dvr9u1ddpw9)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="8" y="805.3467">User</text><ellipse cx="26" cy="818.6484" fill="#FEFECE" filter="url(#f6dvr9u1ddpw9)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M26,826.6484 L26,853.6484 M13,834.6484 L39,834.6484 M26,853.6484 L13,868.6484 M26,853.6484 L39,868.6484 " fill="none" filter="url(#f6dvr9u1ddpw9)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f6dvr9u1ddpw9)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="66" x="80" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52" x="87" y="70.9951">Browser</text><rect fill="#FEFECE" filter="url(#f6dvr9u1ddpw9)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="66" x="80" y="792.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52" x="87" y="812.3467">Browser</text><rect fill="#FEFECE" filter="url(#f6dvr9u1ddpw9)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="81" x="160" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="67" x="167" y="70.9951">Supervisor</text><rect fill="#FEFECE" filter="url(#f6dvr9u1ddpw9)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="81" x="160" y="792.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="67" x="167" y="812.3467">Supervisor</text><rect fill="#FEFECE" filter="url(#f6dvr9u1ddpw9)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="50" x="255" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="36" x="262" y="70.9951">Nginx</text><rect fill="#FEFECE" filter="url(#f6dvr9u1ddpw9)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="50" x="255" y="792.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="36" x="262" y="812.3467">Nginx</text><rect fill="#FEFECE" filter="url(#f6dvr9u1ddpw9)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="76" x="362" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="62" x="369" y="70.9951">APIServer</text><rect fill="#FEFECE" filter="url(#f6dvr9u1ddpw9)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="76" x="362" y="792.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="62" x="369" y="812.3467">APIServer</text><rect fill="#FEFECE" filter="url(#f6dvr9u1ddpw9)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="75" x="504.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="61" x="511.5" y="70.9951">Container</text><rect fill="#FEFECE" filter="url(#f6dvr9u1ddpw9)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="75" x="504.5" y="792.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="61" x="511.5" y="812.3467">Container</text><rect fill="#FEFECE" filter="url(#f6dvr9u1ddpw9)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="71" x="613.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="620.5" y="70.9951">Remover</text><rect fill="#FEFECE" filter="url(#f6dvr9u1ddpw9)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="71" x="613.5" y="792.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="620.5" y="812.3467">Remover</text><rect fill="#FEFECE" filter="url(#f6dvr9u1ddpw9)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="66" x="762" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52" x="769" y="70.9951">LockFile</text><rect fill="#FEFECE" filter="url(#f6dvr9u1ddpw9)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="66" x="762" y="792.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52" x="769" y="812.3467">LockFile</text><rect fill="#FEFECE" filter="url(#f6dvr9u1ddpw9)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="61" x="842" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="47" x="849" y="70.9951">Images</text><rect fill="#FEFECE" filter="url(#f6dvr9u1ddpw9)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="61" x="842" y="792.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="47" x="849" y="812.3467">Images</text><rect fill="#FEFECE" filter="url(#f6dvr9u1ddpw9)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="114" x="917" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100" x="924" y="70.9951">RemoveFlagFile</text><rect fill="#FEFECE" filter="url(#f6dvr9u1ddpw9)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="114" x="917" y="792.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100" x="924" y="812.3467">RemoveFlagFile</text><rect fill="#FFFFFF" filter="url(#f6dvr9u1ddpw9)" height="474.125" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="539" y="117.4297"/><rect fill="#FFFFFF" filter="url(#f6dvr9u1ddpw9)" height="16" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="539" y="768.3516"/><rect fill="#FFFFFF" filter="url(#f6dvr9u1ddpw9)" height="415.8594" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="792" y="263.0938"/><rect fill="#FFFFFF" filter="url(#f6dvr9u1ddpw9)" height="299.3281" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="869.5" y="321.3594"/><rect fill="#FFFFFF" filter="url(#f6dvr9u1ddpw9)" height="270.1953" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="971" y="379.625"/><polygon fill="#A80036" points="527,113.4297,537,117.4297,527,121.4297,531,117.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="202.5" x2="533" y1="117.4297" y2="117.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="209.5" y="112.3638">コンテナ起動</text><polygon fill="#A80036" points="103,142.5625,113,146.5625,103,150.5625,107,146.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="26" x2="109" y1="146.5625" y2="146.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="33" y="141.4966">画面表示</text><polygon fill="#A80036" points="103,171.6953,113,175.6953,103,179.6953,107,175.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="26" x2="109" y1="175.6953" y2="175.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="33" y="170.6294">シェル実行</text><polygon fill="#A80036" points="270,200.8281,280,204.8281,270,208.8281,274,204.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="115" x2="276" y1="204.8281" y2="204.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="122" y="199.7622">POSTリクエスト</text><polygon fill="#A80036" points="390,229.9609,400,233.9609,390,237.9609,394,233.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="282" x2="396" y1="233.9609" y2="233.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="289" y="228.895">POSTのプロキシ</text><polygon fill="#A80036" points="780,259.0938,790,263.0938,780,267.0938,784,263.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="402" x2="786" y1="263.0938" y2="263.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="234" x="409" y="258.0278">コンテナ使用中のロックファイルを生成</text><polygon fill="#A80036" points="527,288.2266,537,292.2266,527,296.2266,531,292.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="402" x2="533" y1="292.2266" y2="292.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="409" y="287.1606">シェルの実行(exec)</text><polygon fill="#A80036" points="857.5,317.3594,867.5,321.3594,857.5,325.3594,861.5,321.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="549" x2="863.5" y1="321.3594" y2="321.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="556" y="316.2935">画像ファイルを生成</text><polygon fill="#A80036" points="413,346.4922,403,350.4922,413,354.4922,409,350.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="407" x2="538" y1="350.4922" y2="350.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="419" y="345.4263">実行結果の返却</text><polygon fill="#A80036" points="959,375.625,969,379.625,959,383.625,963,379.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="402" x2="965" y1="379.625" y2="379.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="409" y="374.5591">コンテナ削除フラグを作成</text><polygon fill="#A80036" points="293,404.7578,283,408.7578,293,412.7578,289,408.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="287" x2="401" y1="408.7578" y2="408.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="299" y="403.6919">レスポンス</text><polygon fill="#A80036" points="126,433.8906,116,437.8906,126,441.8906,122,437.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="120" x2="281" y1="437.8906" y2="437.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="132" y="432.8247">レスポンス</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="115" x2="157" y1="467.0234" y2="467.0234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="157" x2="157" y1="467.0234" y2="480.0234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="116" x2="157" y1="480.0234" y2="480.0234"/><polygon fill="#A80036" points="126,476.0234,116,480.0234,126,484.0234,122,480.0234" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="122" y="461.9575">画面再描画</text><polygon fill="#A80036" points="37,505.1563,27,509.1563,37,513.1563,33,509.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="31" x2="114" y1="509.1563" y2="509.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="43" y="504.0903">画面表示</text><polygon fill="#A80036" points="959,534.2891,969,538.2891,959,542.2891,963,538.2891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="651" x2="965" y1="538.2891" y2="538.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="658" y="533.2231">フラグファイルの有無をチェック</text><path d="M494.5,553.2891 L557.5,553.2891 L557.5,560.2891 L547.5,570.2891 L494.5,570.2891 L494.5,553.2891 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="133.6641" style="stroke: #000000; stroke-width: 2.0;" width="550.5" x="494.5" y="553.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="509.5" y="566.356">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="162" x="572.5" y="565.4995">[フラグファイルが存在するなら]</text><polygon fill="#A80036" points="555,587.5547,545,591.5547,555,595.5547,551,591.5547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="549" x2="650" y1="591.5547" y2="591.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="561" y="586.4888">コンテナ破棄</text><polygon fill="#A80036" points="862.5,616.6875,872.5,620.6875,862.5,624.6875,866.5,620.6875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="651" x2="868.5" y1="620.6875" y2="620.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="658" y="615.6216">画像ファイルを削除</text><polygon fill="#A80036" points="964,645.8203,974,649.8203,964,653.8203,968,649.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="651" x2="970" y1="649.8203" y2="649.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="658" y="644.7544">削除フラグ削除</text><polygon fill="#A80036" points="785,674.9531,795,678.9531,785,682.9531,789,678.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="651" x2="791" y1="678.9531" y2="678.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="658" y="673.8872">ロックファイル削除</text><polygon fill="#A80036" points="532,711.0859,542,715.0859,532,719.0859,536,715.0859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="202.5" x2="538" y1="715.0859" y2="715.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="209.5" y="710.02">プロセス死活監視</text><path d="M150,730.0859 L213,730.0859 L213,737.0859 L203,747.0859 L150,747.0859 L150,730.0859 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="443.5" x="150" y="730.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="165" y="743.1528">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="173" x="228" y="742.2964">[コンテナプロセスが死んでいたら]</text><polygon fill="#A80036" points="527,764.3516,537,768.3516,527,772.3516,531,768.3516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="202.5" x2="533" y1="768.3516" y2="768.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="209.5" y="763.2856">コンテナ起動</text><!--
@startuml

actor User as user
participant Browser as browser
participant Supervisor as visor
participant Nginx as nginx
participant APIServer as api
participant Container as cont
participant Remover as rm
participant LockFile as lock
participant Images as img
participant RemoveFlagFile as rmflag

visor -> cont : コンテナ起動
activate cont
user -> browser : 画面表示
user -> browser : シェル実行
browser -> nginx : POSTリクエスト
nginx -> api : POSTのプロキシ
api -> lock : コンテナ使用中のロックファイルを生成
activate lock
api -> cont : シェルの実行(exec)
cont -> img : 画像ファイルを生成
activate img
cont -> api : 実行結果の返却
api -> rmflag : コンテナ削除フラグを作成
activate rmflag
api -> nginx : レスポンス
nginx -> browser : レスポンス
browser -> browser : 画面再描画
browser -> user : 画面表示

rm -> rmflag : フラグファイルの有無をチェック
alt フラグファイルが存在するなら
    rm -> cont : コンテナ破棄
    deactivate cont
    rm -> img : 画像ファイルを削除
    deactivate img
    rm -> rmflag : 削除フラグ削除
    deactivate rmflag
    rm -> lock : ロックファイル削除
    deactivate lock
end

visor -> cont : プロセス死活監視
alt コンテナプロセスが死んでいたら
    visor -> cont : コンテナ起動
    activate cont
end

@enduml

PlantUML version 1.2019.09(Tue Aug 27 01:19:51 JST 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.5+10
Operating System: Linux
OS Version: 4.19.91-1-MANJARO
Default Encoding: UTF-8
Language: ja
Country: JP
--></g></svg>